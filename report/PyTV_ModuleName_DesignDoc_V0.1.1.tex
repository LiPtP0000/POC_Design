% \documentclass[onecolumn]{article}
\documentclass[a4paper, oneside]{report}
\usepackage[tt=false]{libertine}
\usepackage[a4paper]{geometry}
\geometry{left=0.680in,right=0.680in,top=2cm,bottom=2cm}
\usepackage{titlesec}
\usepackage{color}
\usepackage{pmboxdraw}
\usepackage{newunicodechar}
\usepackage{bm}
\usepackage{fancyhdr} % Header & Footnotes
\usepackage[linesnumbered, ruled, vlined]{algorithm2e}
\usepackage{enumerate}
\usepackage{algpseudocode}
\usepackage{multirow}
\usepackage{multicol}
\usepackage{subfig}
\usepackage{graphicx}
\usepackage{float}
\usepackage{indentfirst}
\usepackage{amssymb,mathtools,amsthm}
\usepackage{nccmath}
\usepackage{listings}
\usepackage[usenames,dvipsnames]{xcolor}
\usepackage{lipsum}
\usepackage{booktabs}
\usepackage{siunitx}
\usepackage{makecell}
\usepackage{sectsty}
\usepackage{url}
\usepackage{threeparttable}
\usepackage{pdfpages}
\usepackage{advdate}
\usepackage{fancyvrb}
\usepackage[font=footnotesize,labelfont=bf]{caption}
\captionsetup[figure]{name={Fig.}}
\usepackage{adjustbox}
\usepackage[backend=biber, style=ieee, maxnames=3]{biblatex}
\usepackage[colorlinks=true,linkcolor=purple,urlcolor=blue,citecolor=red]{hyperref}
\usepackage[many]{tcolorbox}
\usepackage{varwidth}
\usepackage[framemethod=tikz]{mdframed}
\usepackage{lipsum}
\usepackage{tcolorbox}
\usepackage{colortbl}
\usepackage{eso-pic}
\usepackage{pgfplots}
\usepackage{expl3}
\usepackage{longtable}
\usepackage{ragged2e} % For improved text alignment inside cells
\usepackage{settings}

% Bibliography Settings
\addbibresource{ref/ref.bib}
\AtBeginBibliography{\small} % bib font size

\modulename{Add}
\author{Bolin Li}
\date{2024/11/01}
\version{0.1.1}
\revision{      0.0.1   & Bolin Li   & 2024/08/    & Initial Update    \\ 
                0.0.4   & Yunwei Mao    & 2024/08/25    & Add Function A    \\
                0.0.5   & Changhan Li   & 2024/09/20    & Fix Bugs B        \\
                0.1.0   & Changhan Li   & 2024/09/23    & New Feature C     \\
                0.1.1   & Changhan Li   & 2024/10/12    & Remove Functional Model \\
                0.x.x   & Niurou Xing   & 2024/13/32    & \lipsum[1]        \\
}
\releasenotes{
    (optional) It is recommended to write brief update messages in the table above and provide detailed release notes here. Any important notations should be included.
}

\renewcommand \tabcolsep { 18pt }
\renewcommand \arraystretch { 1.3 }

\begin{document}
    \setmainfont{TeX Gyre Heros}
    \maketitle
    \tableofcontents
    \thispagestyle{empty}
    \clearpage
    \pagestyle{fancy}
    \setcounter{page}{1}
    \pagenumbering{arabic}
    \chapter{Preliminaries}
        \section{Purpose and scope}
        This module will realize a general purpose \textbf{fixed-point addition} operation. It will take two input fixed-point value and output their sum in fixed-point format.
        \section{Notations}
            All definitions, acronyms, and abbreviations used in the document will be listed here.
            \begin{itemize}
                \item Functional description: A description of the module's combinational behavior.
                \item Functional model: A (usually QuBLAS) model of the module's behavior.
            \end{itemize}
        \section{Typographic conventions}
            The following typographic conventions are used in this document:
            \begin{longtable}{l l}
                \toprule
                \textbf{Visual Cue} & \textbf{Meaning} \\
                \midrule
                $(\text{Bullet})~\bullet$   & List of important items. \\
                \texttt{monospace}          & Codes or commands typed on the keyboard. \\
                \texttt{MONOSPACE}          & Constants, parameters. \\
                \textit{italic}             & Variable values, file and directory names. \\
                \textit{<italic>}           & Placeholder text for users to insert values with. \\[0pt]
                [item]                      & Optional items. \\
                \warning{bold red text}     & Important notes, warnings, or errors. \\
                \success{bold green text}   & Indicating success. \\
                \remark{green text}         & Comments or remarks.\\
                \revise{blue text}          & Revised text or keywords. \\
                \url{monospace/blue}        & URLs, links. \\
                \textsc{Small Caps}         & Hardware submodule names.  \\
                \bottomrule
            \end{longtable}

        \section{Dependencies}
            Here lists all the dependencies of the module, including the software and submodule dependencies.
            \subsection{Software dependencies}
                This part should list all the software dependencies of the module, including the software name and version.
                \begin{longtable}{ll}
                    \toprule
                    \textbf{Software} & \textbf{Version} \\
                    \midrule
                    PyTV (verithon)     & 0.3 \\
                    PyTU                & 0.1.0 \\
                    % QuBLAS              & 0.1.0 \\
                    % Qumadillo           & 0.1.0 \\
                    \bottomrule
                \end{longtable}

            \subsection{Submodule dependencies}
                This part should list all the PyTV submodule dependencies of the module, including the submodule name and version.
                \begin{longtable}{ll}
                    \toprule
                    \textbf{Submodule} & \textbf{Version} \\
                    \midrule
                    \textsc{Submodule A}         & 0.1.0 \\
                    \textsc{Submodule B}         & 0.1.0 \\
                    \bottomrule
                \end{longtable}

    \chapter{Functionality}
        \section{Overview}
            Describe the module's functionality in a high-level manner. This section should provide a brief description of the module's behavior and its main features.
        \section{Configurable parameters}
            List all the configurable parameters of the module, including their default values and the range of values they can take. If the parameter doesn't have a default value, it should be marked as "None".
            \begin{longtable}{llll}
                \toprule
                \textbf{Parameter}  & \textbf{Range}  & \textbf{Default} & \textbf{Description} \\
                \midrule
                \texttt{Qu\_op1}    & $\{\mathbb{N}^{+}, \mathbb{Z}, \{u, s\}\}$        & $\{5, 3, u\}$     & Quantization settings for op1\\
                \texttt{PARAM\_1}   & $\mathbb{N}$                                      & 0     & XXXX            \\
                \texttt{PARAM\_2}   & $\{0, 1, \dots, 10\}$                             & 1    & XXXX             \\
                \texttt{PARAM\_3}   & All available modes                               & None  & XXXX            \\
                \bottomrule
            \end{longtable}
        \section{External interface}
            For each port, describe their direction, their width, their purpose, and their behavior. With modules having multiple interfaces, each interface should be described in a separate subsection. Clock and reset signals should be described in a separate subsection.
            
            The direction of the port should be described in the signal name, using a prefix of \texttt{i\_} for input ports and \texttt{o\_} for output ports. Bidirectional ports should be prefixed with \texttt{io\_}, and control signals should be prefixed with \texttt{ctrl\_} (the prefix \texttt{ctrl\_} should be used for both input and output control signals, and after the direction prefix).

            By convention, negative-effective signals should be marked with a suffix of \texttt{\_n}.
            \subsection{Clock and reset}
                Synchronous reset and asynchronous release is the default reset behavior. If the module has a different reset behavior, it should be described here.
                \begin{longtable}{lll}
                    \toprule
                    \textbf{Signal}      & \textbf{Width}    & \textbf{Description} \\
                    \midrule
                    \texttt{i\_clk}      & $1$                 & Clock signal \\
                    \texttt{i\_rst\_n}   & $1$                 & Reset signal \\
                    \bottomrule
                \end{longtable}
            \subsection{Interface A}
                If the module has multiple interfaces, each interface should have a seperate prefix in the form of \texttt{X}\textit{<val>}\texttt{\_}, this prefix should be placed right after the direction prefix. To use \texttt{Xspi} as an example, the signals should be named as follows:
                \begin{longtable}{lll}
                    \toprule
                    \textbf{Signal}      & \textbf{Width}    & \textbf{Description} \\
                    \midrule
                    \texttt{i\_Xspi\_data}      & $32$*\texttt{PARAM\_1}         & Input data \\
                    \texttt{i\_Xspi\_ctrl\_data}& $1$                            & Control signal for input data \\
                    \texttt{o\_Xspi\_result}    & $16$*\texttt{PARAM\_2}         & Output result \\
                    \texttt{o\_Xspi\_ctrl\_done}& $1$                            & Control signal for output result \\
                    \bottomrule
                \end{longtable}
            \subsection{Interface B}
        
        \section{Functional description}
            If the module has multiple functions, each function should be described in a separate subsection.
            \subsection{Function A}
                Use algorithms, equations, or diagrams to describe the behavior of the module.
                
                Example Algorithm:

                {
                    % \hsize=13cm
                    % \setlength{\algomargin}{12pt}
                    \RemoveAlgoNumber
                    \begin{algorithm}[H]
                        \caption{Orthogonal Mathcing Pursuit (OMP)}
                        \KwIn{$\mathbf{Q} \in \mathbb{C}^{M \times N}$, $\mathbf{y} \in \mathbb{C}^{M \times 1}$, Max Iter $K$.}
                        \vspace{1pt}
                        \KwOut{Estimated channel $\hat{\mathbf{h}}$.}
                        \vspace{1pt}
                        $\mathcal{S}^{(0)} = \emptyset, \mathbf{r}^{(0)} = \mathbf{y}, \hat{\mathbf{h}} = \mathbf{0}$. \tcp*[r]{Initialization}
                    
                        \For{$k=0, 1, \cdots, K-1$}{
                            $\mathcal{S}^{(k+1)} = \mathcal{S}^{(k)} \cup \arg\max\{\mathrm{abs}(\mathbf{Q}^{\mathsf{H}}\mathbf{r}^{(k)})\}$ \label{alg:OMP:step:augmentation} \tcp*[r]{Augmentation}
                    
                            $\mathbf{x}^{(k+1)} = (\mathbf{Q}_{\mathcal{S}^{(k+1)}}^{\mathsf{H}}\mathbf{Q}_{\mathcal{S}^{(k+1)}})^{-1}\mathbf{Q}_{\mathcal{S}^{(k+1)}}^{\mathsf{H}}\mathbf{y}$ \label{alg:OMP:step:LS} \tcp*[r]{LS Solve}
                    
                            $\mathbf{r}^{(k+1)} = \mathbf{y} - \mathbf{Q}_{\mathcal{S}^{(k+1)}}\mathbf{x}^{(k+1)}$ \label{alg:OMP:step:residual}
                            \tcp*[r]{Residual}
                        }
                    
                        $\hat{\mathbf{h}}_{\mathcal{S}^{(K)}} = \mathbf{x}^{(K)}$ \label{alg:OMP:step:output} \tcp*[r]{Output}
                    \end{algorithm}
                }

            \subsection{Function B}

            Code example:

            \begin{lstlisting}[language=Python]
import PyTV
def function_b(param1, param2):
    """
    Function B description.
    """
    return param1 + param2
            \end{lstlisting}
            \begin{lstlisting}[language=Verilog]
module example_module (
    input wire [5:0] i_data,
    output wire [7:0] o_result
);
    assign o_result = i_data + 1'b1; // add
endmodule
            \end{lstlisting}

    \chapter{Implementation}
        \section{Overall architecture}
                Please provide a top-level diagram of the module's architecture, including the main components and their interconnections.
        \section{Data and control flow}
            \subsection{Timeline diagram}
                This part should describe the timeline of the module, including the data and control flow.
            \subsection{FSM design}
                This part should describe the FSM design of the module, including the state transition diagram and the state encoding.
        \section{External sequential behavior}
            \subsection{Latency analysis}
                This part should describe the latency of the module in terms of clock cycles.
            \subsection{Throughput analysis}
                This part should describe the maximum throughput of the module, including interfaces, burst, consistent, etc.


    \printbibliography[title={References},heading=bibintoc]

\end{document}